// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "mysql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                String    @id @default(cuid())
  name              String    @default("")
  nom               String    @default("")
  prenom            String    @default("")
  telephone         Int?
  piece             Int?
  email             String    @unique @default("")
  naissance         DateTime? @unique @map("my_date") @mysql.Date
  photo_filesize    Int?
  photo_extension   String?
  photo_width       Int?
  photo_height      Int?
  photo_id          String?
  bio               String    @default("")
  adresse           String    @default("")
  ville             String    @default("")
  password          String
  createdAt         DateTime? @default(now())
  avis              Avi[]     @relation("User_avis")
  voitures          Voiture[] @relation("User_voitures")
  from_Voiture_user Voiture[] @relation("Voiture_user")
  from_Avi_user     Avi[]     @relation("Avi_user")
}

model Chauffeur {
  id                    String    @id @default(cuid())
  name                  String    @default("")
  nom                   String    @default("")
  prenom                String    @default("")
  telephone             Int?
  piece                 Int?
  email                 String    @unique @default("")
  naissance             DateTime? @unique @map("my_date") @mysql.Date
  photo_filesize        Int?
  photo_extension       String?
  photo_width           Int?
  photo_height          Int?
  photo_id              String?
  bio                   String    @default("")
  adresse               String    @default("")
  ville                 String    @default("")
  password              String
  createdAt             DateTime? @default(now())
  avis                  Avi[]     @relation("Chauffeur_avis")
  voitures              Voiture[] @relation("Chauffeur_voitures")
  permis                String    @default("")
  trajets               Trajet[]  @relation("Chauffeur_trajets")
  posts                 Post[]    @relation("Post_author")
  from_Trajet_chauffeur Trajet[]  @relation("Trajet_chauffeur")
}

model Voiture {
  id                      String      @id @default(cuid())
  plaque                  String      @default("")
  color                   String?     @default("noir")
  marque                  String?     @default("ford")
  model                   String?     @default("ford")
  years                   String      @default("1950")
  user                    User?       @relation("Voiture_user", fields: [userId], references: [id])
  userId                  String?     @map("user")
  from_User_voitures      User[]      @relation("User_voitures")
  from_Chauffeur_voitures Chauffeur[] @relation("Chauffeur_voitures")
  from_Voyageur_voitures  Voyageur[]  @relation("Voyageur_voitures")

  @@index([userId])
}

model Post {
  id       String     @id @default(cuid())
  title    String     @default("")
  content  Json       @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  author   Chauffeur? @relation("Post_author", fields: [authorId], references: [id])
  authorId String?    @map("author")
  tags     Tag[]      @relation("Post_tags")

  @@index([authorId])
}

model Trajet {
  id                      String        @id @default(cuid())
  position_depart         String        @default("")
  position_arrive         String        @default("")
  date_depart             DateTime      @map("my_date") @mysql.Date
  date_arrive             DateTime      @map("my_date1") @mysql.Date
  heure_depart            DateTime
  heure_arrive            DateTime
  nbre_place              Int
  chauffeur               Chauffeur?    @relation("Trajet_chauffeur", fields: [chauffeurId], references: [id])
  chauffeurId             String?       @map("chauffeur")
  avis                    Avi[]         @relation("Trajet_avis")
  reservations            Reservation[] @relation("Trajet_reservations")
  gare                    Gare?         @relation("Trajet_gare", fields: [gareId], references: [id])
  gareId                  String?       @map("gare")
  escales                 Escale[]      @relation("Trajet_escales")
  chemin                  Chemin?       @relation("Trajet_chemin", fields: [cheminId], references: [id])
  cheminId                String?       @map("chemin")
  paiement                Paiement?     @relation("Trajet_paiement", fields: [paiementId], references: [id])
  paiementId              String?       @map("paiement")
  from_Chauffeur_trajets  Chauffeur[]   @relation("Chauffeur_trajets")
  from_Chemin_trajets     Chemin[]      @relation("Chemin_trajets")
  from_Gare_trajets       Gare[]        @relation("Gare_trajets")
  from_Escale_trajets     Escale[]      @relation("Escale_trajets")
  from_Paiement_trajet    Paiement[]    @relation("Paiement_trajet")
  from_Reservation_trajet Reservation[] @relation("Reservation_trajet")
  from_Avi_trajet         Avi[]         @relation("Avi_trajet")

  @@index([chauffeurId])
  @@index([gareId])
  @@index([cheminId])
  @@index([paiementId])
}

model Tag {
  id    String @id @default(cuid())
  name  String @default("")
  posts Post[] @relation("Post_tags")
}

model Chemin {
  id                     String      @id @default(cuid())
  duree                  DateTime
  peage                  String      @default("")
  estimation_prix        Float
  trajets                Trajet[]    @relation("Chemin_trajets")
  autoroutes             Autoroute[] @relation("Chemin_autoroutes")
  from_Trajet_chemin     Trajet[]    @relation("Trajet_chemin")
  from_Autoroute_chemins Autoroute[] @relation("Autoroute_chemins")
}

model Gare {
  id               String   @id @default(cuid())
  libelle          String   @default("")
  trajets          Trajet[] @relation("Gare_trajets")
  from_Trajet_gare Trajet[] @relation("Trajet_gare")
}

model Escale {
  id                  String   @id @default(cuid())
  libelle             String   @default("")
  trajets             Trajet[] @relation("Escale_trajets")
  from_Trajet_escales Trajet[] @relation("Trajet_escales")
}

model Autoroute {
  id                     String   @id @default(cuid())
  libelle                String   @default("")
  chemins                Chemin[] @relation("Autoroute_chemins")
  from_Chemin_autoroutes Chemin[] @relation("Chemin_autoroutes")
}

model Paiement {
  id                   String   @id @default(cuid())
  type                 String   @default("")
  status               String?  @default("payer")
  montant              Float
  date                 DateTime @unique @map("my_date") @mysql.Date
  trajet               Trajet?  @relation("Paiement_trajet", fields: [trajetId], references: [id])
  trajetId             String?  @map("trajet")
  from_Trajet_paiement Trajet[] @relation("Trajet_paiement")

  @@index([trajetId])
}

model Reservation {
  id                         String     @id @default(cuid())
  date                       DateTime   @unique @map("my_date") @mysql.Date
  nbre_place                 Int
  trajet                     Trajet?    @relation("Reservation_trajet", fields: [trajetId], references: [id])
  trajetId                   String?    @map("trajet")
  voyageur                   Voyageur?  @relation("Reservation_voyageur", fields: [voyageurId], references: [id])
  voyageurId                 String?    @map("voyageur")
  from_Trajet_reservations   Trajet[]   @relation("Trajet_reservations")
  from_Voyageur_reservations Voyageur[] @relation("Voyageur_reservations")

  @@index([trajetId])
  @@index([voyageurId])
}

model Avi {
  id                  String      @id @default(cuid())
  note                Decimal     @mysql.Decimal(18, 4)
  reste               Decimal     @mysql.Decimal(18, 4)
  user                User?       @relation("Avi_user", fields: [userId], references: [id])
  userId              String?     @map("user")
  trajet              Trajet?     @relation("Avi_trajet", fields: [trajetId], references: [id])
  trajetId            String?     @map("trajet")
  from_User_avis      User[]      @relation("User_avis")
  from_Chauffeur_avis Chauffeur[] @relation("Chauffeur_avis")
  from_Trajet_avis    Trajet[]    @relation("Trajet_avis")
  from_Voyageur_avis  Voyageur[]  @relation("Voyageur_avis")

  @@index([userId])
  @@index([trajetId])
}

model Voyageur {
  id                        String        @id @default(cuid())
  name                      String        @default("")
  nom                       String        @default("")
  prenom                    String        @default("")
  telephone                 Int?
  piece                     Int?
  email                     String        @unique @default("")
  naissance                 DateTime?     @unique @map("my_date") @mysql.Date
  photo_filesize            Int?
  photo_extension           String?
  photo_width               Int?
  photo_height              Int?
  photo_id                  String?
  bio                       String        @default("")
  adresse                   String        @default("")
  ville                     String        @default("")
  password                  String
  createdAt                 DateTime?     @default(now())
  avis                      Avi[]         @relation("Voyageur_avis")
  voitures                  Voiture[]     @relation("Voyageur_voitures")
  reservations              Reservation[] @relation("Voyageur_reservations")
  from_Reservation_voyageur Reservation[] @relation("Reservation_voyageur")
}
